# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–∞–º–∏

–ú–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Ö–æ–¥–∞–º–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ "Hasta la Vista, Money!" –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–µ—Å—Ç–∏ —É—á–µ—Ç –≤—Å–µ—Ö –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–π, –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–æ—Ö–æ–¥–∞ –∏ —Å—Ç—Ä–æ–∏—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É.

## –û–±–∑–æ—Ä —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–∞–º–∏** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –æ –¥–æ—Ö–æ–¥–∞—Ö
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ—Ö–æ–¥–æ–≤** ‚Äî –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–æ—Ö–æ–¥–æ–≤** ‚Äî –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –æ—Ç—á–µ—Ç—ã –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º –∏ –¥–∏–Ω–∞–º–∏–∫–µ
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫** ‚Äî –ø–æ –¥–∞—Ç–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Å—É–º–º–µ, –∏—Å—Ç–æ—á–Ω–∏–∫—É
- **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö** ‚Äî –≤—ã–≥—Ä—É–∑–∫–∞ –¥–æ—Ö–æ–¥–æ–≤ –¥–ª—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

–ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å –æ –¥–æ—Ö–æ–¥–µ —Å–æ–¥–µ—Ä–∂–∏—Ç:

- **–°—É–º–º–∞** ‚Äî –ø–æ—Å—Ç—É–ø–∏–≤—à–∞—è —Å—É–º–º–∞ (–¥–æ 12 –∑–Ω–∞–∫–æ–≤)
- **–ö–∞—Ç–µ–≥–æ—Ä–∏—è** ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–æ—Ö–æ–¥–∞ (–∑–∞—Ä–ø–ª–∞—Ç–∞, –ø—Ä–µ–º–∏—è, –≤–æ–∑–≤—Ä–∞—Ç –∏ —Ç.–¥.)
- **–î–∞—Ç–∞** ‚Äî –¥–∞—Ç–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è
- **–°—á–µ—Ç** ‚Äî –∫—É–¥–∞ –∑–∞—á–∏—Å–ª–µ–Ω –¥–æ—Ö–æ–¥
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** ‚Äî –≤–ª–∞–¥–µ–ª–µ—Ü –∑–∞–ø–∏—Å–∏
- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π** ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ—Ö–æ–¥–æ–≤

![income_page.png](https://media.githubusercontent.com/media/TurtleOld/hasta-la-vista-money/refs/heads/main/docs/img/income_page.png)

–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–µ–∫—Ü–∏–π:

#### 1. –¢–∞–±–ª–∏—Ü–∞ –¥–æ—Ö–æ–¥–æ–≤

!!! info "–¢–∞–±–ª–∏—Ü–∞ –¥–æ—Ö–æ–¥–æ–≤"

    - **–î–∞—Ç–∞** ‚Äî –¥–∞—Ç–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è
    - **–ö–∞—Ç–µ–≥–æ—Ä–∏—è** ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–æ—Ö–æ–¥–∞
    - **–°—É–º–º–∞** ‚Äî –ø–æ—Å—Ç—É–ø–∏–≤—à–∞—è —Å—É–º–º–∞
    - **–°—á–µ—Ç** ‚Äî –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ
    - **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π** ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    - **–ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π** ‚Äî —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ
    - **–§–∏–ª—å—Ç—Ä—ã** ‚Äî –ø–æ –¥–∞—Ç–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Å—É–º–º–µ

#### 2. –ì—Ä–∞—Ñ–∏–∫ –¥–æ—Ö–æ–¥–æ–≤

!!! info "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–æ—Ö–æ–¥–æ–≤"

    - **–î–∏–Ω–∞–º–∏–∫–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–π** ‚Äî –ø–æ –¥–Ω—è–º, –Ω–µ–¥–µ–ª—è–º, –º–µ—Å—è—Ü–∞–º
    - **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º** ‚Äî –∫—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞
    - **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** ‚Äî –Ω–∞–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏

#### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–∞

!!! abstract "–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è"

    1. **–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "+"**
    2. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:**
       - –°—É–º–º–∞
       - –ö–∞—Ç–µ–≥–æ—Ä–∏—è
       - –°—á–µ—Ç
       - –î–∞—Ç–∞
       - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    3. **–ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"**

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ—Ö–æ–¥–æ–≤

!!! info "–†–∞–±–æ—Ç–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏"

    - **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π** ‚Äî –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
    - **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ** ‚Äî —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    - **–ò–µ—Ä–∞—Ä—Ö–∏—è** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π

## API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### REST API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

```http
GET    /api/incomes/                # –°–ø–∏—Å–æ–∫ –¥–æ—Ö–æ–¥–æ–≤
POST   /api/incomes/                # –î–æ–±–∞–≤–∏—Ç—å –¥–æ—Ö–æ–¥
GET    /api/incomes/{id}/           # –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Ö–æ–¥
PUT    /api/incomes/{id}/           # –û–±–Ω–æ–≤–∏—Ç—å –¥–æ—Ö–æ–¥
DELETE /api/incomes/{id}/           # –£–¥–∞–ª–∏—Ç—å –¥–æ—Ö–æ–¥
GET    /api/income-categories/      # –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–æ—Ö–æ–¥–æ–≤
POST   /api/income-categories/      # –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
```

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

#### Income (–î–æ—Ö–æ–¥)

```json
{
  "id": 1,
  "user": 1,
  "category": 2,
  "account": 1,
  "amount": "25000.00",
  "date": "2024-06-01",
  "comment": "–ó–∞—Ä–ø–ª–∞—Ç–∞ –∑–∞ –∏—é–Ω—å",
  "created_at": "2024-06-01T10:00:00Z"
}
```

#### IncomeCategory (–ö–∞—Ç–µ–≥–æ—Ä–∏—è –¥–æ—Ö–æ–¥–∞)

```json
{
  "id": 2,
  "user": 1,
  "name": "–ó–∞—Ä–ø–ª–∞—Ç–∞",
  "parent_category": null
}
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** ‚Äî –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç –≤—Ö–æ–¥–∞
- **–ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–æ—Ö–æ–¥—ã
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞** ‚Äî –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ —Å–æ —Å–≤–æ–∏–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ –¥–æ—Ö–æ–¥–∞–º–∏

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

```python
# –ü—Ä–∏–º–µ—Ä –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—É–º–º—ã
if amount <= 0:
    raise ValidationError("–°—É–º–º–∞ –¥–æ—Ö–æ–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π")
```

### –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫

- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–∞ –∞—Ç–æ–º–∞—Ä–Ω–æ
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è
- **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–æ—Ö–æ–¥–æ–≤

### –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –æ—Ç—á–µ—Ç—ã

- **–î–∏–Ω–∞–º–∏–∫–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–π** ‚Äî –ø–æ –¥–∞—Ç–∞–º
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º** ‚Äî –∞–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤** ‚Äî —Ä–æ—Å—Ç/–ø–∞–¥–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–æ–≤

### –ü—Ä–∏–º–µ—Ä –∞–≥—Ä–µ–≥–∞—Ü–∏–∏

```python
# –°—É–º–º–∞ –¥–æ—Ö–æ–¥–æ–≤ –ø–æ –¥–Ω—è–º
income_dataset = Income.objects.filter(user=user).values('date').annotate(
    total_amount=Sum('amount')
).order_by('date')

# –°—É–º–º–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
category_dataset = Income.objects.filter(user=user).values('category__name').annotate(
    total_amount=Sum('amount')
).order_by('-total_amount')
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤** ‚Äî select_related –¥–ª—è account, category
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤ –∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### "–°—É–º–º–∞ –¥–æ—Ö–æ–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π"

**–ü—Ä–∏—á–∏–Ω–∞:** –í–≤–µ–¥–µ–Ω–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—É–º–º–∞.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É–º–º—É
- –í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

#### "–ö–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–∞—Ç–µ–≥–æ—Ä–∏—è –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

```python
# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
import logging
logger = logging.getLogger(__name__)

def add_income(user, amount, category, account):
    try:
        income = Income.objects.create(
            user=user, amount=amount, category=category, account=account
        )
        logger.info(f"Income added: {amount} to {account} in {category}")
        return income
    except Exception as e:
        logger.error(f"Income add error: {e}")
        raise
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è** ‚Äî 500 —Å–∏–º–≤–æ–ª–æ–≤
- **–¢–æ—á–Ω–æ—Å—Ç—å —Å—É–º–º—ã** ‚Äî 2 –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Ö–æ–¥–æ–≤** ‚Äî –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ

## –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

- **–ò–º–ø–æ—Ä—Ç –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –≤—ã–ø–∏—Å–æ–∫**
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –¥–æ—Ö–æ–¥–æ–≤**
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è—Ö**
- **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**

---

**Hasta la Vista, Money!** ‚Äî –í–∞—à–∏ –¥–æ—Ö–æ–¥—ã –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º! üí∏ 